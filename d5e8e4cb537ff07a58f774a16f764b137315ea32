{
  "comments": [
    {
      "key": {
        "uuid": "de31f215_490bf762",
        "filename": "src/remoteinstaller/installer/install.py",
        "patchSetId": 1
      },
      "lineNbr": 142,
      "author": {
        "id": 43
      },
      "writtenOn": "2019-07-23T11:16:45Z",
      "side": 1,
      "message": "This should fix it, but I think your real mistake was in not adding the new parameter to the end of the function definition. If, in https://gerrit.akraino.org/r/#/c/ta/hw-detector/+/1077/2/src/hw_detector/hw_detect_lib.py you had added \"ipmi_priv_level\u003d\u0027ADMINISTRATOR\u0027\" after \"detect_virtual\u003dTrue\" then this call would work properly.\n\nBecause you inserted the new parameter before an existing parameter (albeit one with a default) you caused this non-keyword call to supply \"False\" as the value for \"ipmi_priv_level\" instead of for \"detect_virtual\" as it was supposed to.",
      "revId": "d5e8e4cb537ff07a58f774a16f764b137315ea32",
      "serverId": "4cada01b-0314-4fe0-84a1-f9ddc89863f9",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "26747124_e5ecd296",
        "filename": "src/remoteinstaller/installer/install.py",
        "patchSetId": 1
      },
      "lineNbr": 142,
      "author": {
        "id": 180
      },
      "writtenOn": "2019-07-23T12:55:20Z",
      "side": 1,
      "message": "Yep, I\u0027m aware of why the problem happened.  My decision to add the parameter where I did was a considered one — the preceding arguments are all about IPMI, whereas the last argument is not.  I decided that keeping the interface to the function rather clean was worth the risk of breakage for things that didn\u0027t use keyword arguments.  Given nobody complained about the choice there, I took that as approval of the decision.",
      "parentUuid": "de31f215_490bf762",
      "revId": "d5e8e4cb537ff07a58f774a16f764b137315ea32",
      "serverId": "4cada01b-0314-4fe0-84a1-f9ddc89863f9",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eee94511_098ce250",
        "filename": "src/remoteinstaller/installer/install.py",
        "patchSetId": 1
      },
      "lineNbr": 142,
      "author": {
        "id": 205
      },
      "writtenOn": "2019-07-23T13:14:02Z",
      "side": 1,
      "message": "Hi,\nwhat is the use case for the change? Is there any HW, which needs this change? I think hw_detector is only reading!\nBR\nRalf",
      "parentUuid": "26747124_e5ecd296",
      "revId": "d5e8e4cb537ff07a58f774a16f764b137315ea32",
      "serverId": "4cada01b-0314-4fe0-84a1-f9ddc89863f9",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39b121dc_eb5cf9cd",
        "filename": "src/remoteinstaller/installer/install.py",
        "patchSetId": 1
      },
      "lineNbr": 142,
      "author": {
        "id": 180
      },
      "writtenOn": "2019-07-23T13:36:46Z",
      "side": 1,
      "message": "This change is to fix interaction with the following changes:\n\nhttps://gerrit.akraino.org/r/c/ta/infra-ansible/+/1160\nhttps://gerrit.akraino.org/r/c/ta/cm-plugins/+/1078\nhttps://gerrit.akraino.org/r/c/ta/hw-detector/+/1077\nhttps://gerrit.akraino.org/r/c/ta/config-manager/+/1076\n\n... which have already merged, and these changes, which haven\u0027t:\n\nhttps://gerrit.akraino.org/r/c/ta/config-manager/+/1216\nhttps://gerrit.akraino.org/r/c/ta/cm-plugins/+/1217\n\nTo save you some reading, the use case here is that previously, calls to ipmitool were not passing a privilege level argument.  In that case, ipmitool defaults to a privilege level of ADMINISTRATOR.  However, ADMINISTRATOR privilege is not necessarily required to install the REC — only OPERATOR is necessary.  Some sites (including mine in Bedminster) have IPMI accounts with only OPERATOR privilege due to security requirements.  As such, we need to allow the privilege level to be specified and passed as an argument when invoking ipmitool.\n\nThe aforementioned changes implemented this; however, this call to get_hw_data() was missed (my fault) and is broken as a result.  We need this change in order to make installations actually work again.",
      "parentUuid": "eee94511_098ce250",
      "revId": "d5e8e4cb537ff07a58f774a16f764b137315ea32",
      "serverId": "4cada01b-0314-4fe0-84a1-f9ddc89863f9",
      "unresolved": false
    }
  ]
}